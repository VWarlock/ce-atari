<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
        <title>CosmosEx Screenshots interface</title>
		<script type="text/javascript" src="js/log.js"></script> 
        <script>
            var version="141116";
            document.write('<link rel="stylesheet" type="text/css" href="css/combined.css?'+version+'">');
            //unfortunately we have to support IE<10, so decide on zepto/jquery here
            document.write('<script type="text/javascript" src=js/' +
            ('__proto__' in {} ? 'zepto' : 'jquery') +
            '-combined.js?'+version+'><\/script>');
            document.write('<script type="text/javascript"">var jQuery=Zepto;<\/script>');
		</script>

    <!-- scale hack to show whole keyboard even on small devices -->
    <script>
        if ($(window).width() < 768) {
            $('meta[name=viewport]').attr('content','initial-scale='+$(window).width()/768+', maximum-scale='+$(window).width()/768+', user-scalable=0'); 
        }
    </script>
    
    <script type="text/javascript" src="js/screen.js"></script> 
    <script>
        $(document).ready(function() {
            $.ajax({
                type: 'GET',
                url:  '/app/screencast/screenshot_query_vbl',
                
                success: function(data){
                    var radioVblOn  = document.getElementById('vbl_on');
                    var radioVblOff = document.getElementById('vbl_off');
                
                    if(data.screenShotVblEnabled) {
                        radioVblOn.checked  = true;
                        radioVblOff.checked = false;
                    } else {
                        radioVblOn.checked  = false;
                        radioVblOff.checked = true;
                    }
                },
                    
                error: function(){
                    // alert('VBL ON - ERROR');
                }
            });
            
            CosmosEx.Screencast();
        });
    
        function vblOn(onNotOff) {
            var reqUrl = '/app/screencast/screenshot_vbl_';
            if(onNotOff) {
                reqUrl += 'enable';
            } else {
                reqUrl += 'disable';
            }
            
            $.ajax({
                type: 'POST',
                url:  reqUrl,
                data: JSON.stringify({ "action":"screenshot_vbl_onoff" }),
                contentType: 'application/json'
            });
        }
        
        function doScreenShot() {
            $.ajax({
                type: 'POST',
                url: '/app/screencast/do_screenshot',
                data: JSON.stringify({ "action":"do_screenshot" }),
                contentType: 'application/json'
            });        
        }
        
    </script>
    
    <style>
        #info {
            position: fixed;
            top: 500px;
            width: 500px;
            
            left: 50%;
            margin-left: -250px;
            
            background-color: #ffffff;
            padding: 20px 20px 20px 20px;
            border-radius: 15px;
        }
    </style>

    </head>
    <!-- -------------------------------------------------------------------- -->
    
    <body class="background">
    
    <noscript>
    <h1>Please use a modern broser with javascript.</h1>
    Like <a href="http://www.opera.com/">Opera</a>, <a href="https://www.mozilla.org/en/firefox/new/">Firefox</a>, <a href="https://download-chromium.appspot.com/">Chromium</a>.
    <style>
    #content{
    display:none;
    }    
    </style>
    </noscript>
    
    <div id="content">
        <div>
            <div>
                <center>
                <table border=0 cellspacing=20 cellpadding=20>
                <tr><td>

                    <a href="/" id="back" class="btn" title="Back to CosmosEx main page">&lt;</a>
                
                </td><td>
                
                    <strong class="heading">CosmosEx Screenshots interface</strong>

                </td><td>
                
                <table border=0 cellspacing=0 cellpadding=5>
                    <tr>
                        <td>
                            Screenshot VBL in CE_DD.PRG<br>
                            &nbsp;
                        </td>
                        <td>
                            <form>
                                <input type="radio" name="vbl_onoff" id="vbl_on"  value="on"  onclick="vblOn(1);">ON<br>  
                                <input type="radio" name="vbl_onoff" id="vbl_off" value="off" onclick="vblOn(0);">OFF
                            </form>
                        </td>
                    </tr>
                </table>

                </td><td>

                <button id="screenshot" class="btn" onclick="doScreenShot();">Take screenshot</button>
            
                </td></tr>
            </table>
            </center>
            
            </div>
        </div>

        <div id="demo_placeholder"></div>

        <div id="info">
        By default this functionality is disabled, so it won't interfere with disk transfers in most cases. <br><br>
        For the screenshot functionality you have to have CE_DD driver loaded. <br><br>
        If you enable or disable this feature, your ST needs a restart and/or the CE_DD has to be reloaded.
        </div>
        
    </div>
    
    </body>
</html>